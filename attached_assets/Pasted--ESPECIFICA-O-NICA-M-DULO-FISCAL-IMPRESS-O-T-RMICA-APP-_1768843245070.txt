üìå ESPECIFICA√á√ÉO √öNICA ‚Äì M√ìDULO FISCAL + IMPRESS√ÉO T√âRMICA + APP LOCAL WINDOWS

1Ô∏è‚É£ NOVA SESS√ÉO NO DASHBOARD (P√ìS-LOGIN ‚Äì PERFIL DONO)

Criar uma nova p√°gina acess√≠vel pelo menu expans√≠vel do dashboard, dispon√≠vel ap√≥s login do usu√°rio DONO.

Nome do menu:
üìÑ Fiscal / Impress√£o

Submenus:

- Configura√ß√£o Fiscal
- Impressoras
- Leitor de C√≥digo de Barras
- Testes (Simula√ß√£o Leg√≠tima)
- Produ√ß√£o (Integra√ß√£o Leg√≠tima)
- Logs Fiscais

---

2Ô∏è‚É£ ARQUITETURA GERAL DO SISTEMA

Plataforma Web (Replit)

Respons√°vel por:

- Cadastro de empresa
- Cadastro fiscal completo
- Gera√ß√£o de venda
- Gera√ß√£o do XML fiscal
- Controle de modo (Simula√ß√£o / Produ√ß√£o)
- Envio de comandos para o app local
- Armazenamento de retornos da SEFAZ

App Local Windows (Obrigat√≥rio)

Respons√°vel por:

- Comunica√ß√£o com impressora t√©rmica via USB
- Comunica√ß√£o com leitor de c√≥digo de barras (HID)
- Impress√£o perfeita no papel t√©rmico
- Retorno de status para a plataforma web

üìå O navegador n√£o imprime diretamente.
A plataforma envia o comando ‚Üí app local imprime.

---

3Ô∏è‚É£ MODOS DE OPERA√á√ÉO (OBRIGAT√ìRIO)

üîπ SIMULA√á√ÉO LEG√çTIMA

- Usa TODOS os campos fiscais reais
- Dados fict√≠cios por√©m v√°lidos em formato
- XML gerado internamente
- QR Code simulado
- Impress√£o id√™ntica √† real
- Nenhum envio √† SEFAZ

üîπ INTEGRA√á√ÉO LEG√çTIMA

- Usa certificado digital A1
- Comunica√ß√£o real com SEFAZ estadual
- Recebe autoriza√ß√£o, chave e protocolo
- QR Code oficial SEFAZ
- Nota fiscal v√°lida juridicamente

O sistema apenas alterna o modo, sem mudar layout nem fluxo.

---

4Ô∏è‚É£ DADOS FISCAIS (100% COMPLETO ‚Äì DESDE J√Å)

Dados da Empresa

- Raz√£o Social
- Nome Fantasia
- CNPJ
- Inscri√ß√£o Estadual
- Endere√ßo completo
- Munic√≠pio + C√≥digo IBGE
- UF
- Regime Tribut√°rio
- CSC Token (SEFAZ)
- S√©rie NFC-e
- Ambiente (Homologa√ß√£o / Produ√ß√£o)

Dados da Venda

- N√∫mero da nota
- Data e hora
- Produtos:
   - C√≥digo interno
   - Descri√ß√£o
   - NCM
   - CFOP
   - Quantidade
   - Valor unit√°rio
   - Valor total
- Totais:
   - Subtotal
   - Descontos
   - Tributos
   - Total geral
- Forma de pagamento
- Troco (se houver)

---

5Ô∏è‚É£ SEFAZ ‚Äì COMUNICA√á√ÉO AUTOM√ÅTICA

Funcionamento

- A cada venda finalizada:
   1. Sistema gera XML NFC-e
   2. Assina com certificado A1
   3. Envia via WebService SEFAZ
   4. Recebe:
      - Autoriza√ß√£o
      - Chave de acesso (44 d√≠gitos)
      - Protocolo
      - Dados do QR Code
   5. Libera impress√£o automaticamente

üìå N√£o √© URL simples
üìå Comunica√ß√£o via WebService oficial SEFAZ

---

6Ô∏è‚É£ QR CODE NA NOTA

- Gerado conforme padr√£o SEFAZ
- Cont√©m:
   - Chave de acesso
   - CSC Token
   - URL oficial de consulta
- Impress√£o obrigat√≥ria no rodap√©

---

7Ô∏è‚É£ LEITOR DE C√ìDIGO DE BARRAS (BIPADOR)

- Funciona como dispositivo HID (teclado)
- Ao bipar:
   - C√≥digo entra automaticamente no campo de busca
   - Sistema adiciona produto √† venda
- Compat√≠vel com EAN-13, EAN-8 e Code128
- Nenhum driver especial no navegador
- Tratamento feito pelo app local se necess√°rio

---

8Ô∏è‚É£ IMPRESSORA T√âRMICA ‚Äì PADR√ÉO MERCADO

Papel

- Largura: 58mm (principal)
- Alternativo: 80mm
- Papel t√©rmico fino

Fonte

- Fonte t√©rmica padr√£o ESC/POS
- Monoespa√ßada
- Alta legibilidade

---

9Ô∏è‚É£ LAYOUT DA IMPRESS√ÉO (OBRIGAT√ìRIO)

Cabe√ßalho (Centralizado)

- RAZ√ÉO SOCIAL
- CNPJ: XX.XXX.XXX/XXXX-XX
- IE: XXXXXXXXX
- ENDERE√áO COMPLETO

---

Corpo da Nota

---

DESC        QTD   VL UN   TOTAL

Produto 1   1x    10,00   10,00
Produto 2   2x     5,00   10,00

Totais

SUBTOTAL:        20,00
DESCONTO:         0,00
TOTAL:           20,00

FORMA PGTO: DINHEIRO
TROCO:            0,00

---

Dados Fiscais

- NFC-e N¬∫: 000123
- S√©rie: 1
- Data/Hora: DD/MM/AAAA HH:MM
- Chave de Acesso:
XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX

---

QR CODE

[ QR CODE CENTRALIZADO ]

---

Rodap√©

Consulta via QR Code
Documento fiscal v√°lido
Obrigado pela prefer√™ncia

---

üîü COMANDOS DE IMPRESS√ÉO

- Corte autom√°tico de papel
- Avan√ßo de linha antes do corte
- Impress√£o sem margens
- Alinhamento central e esquerdo conforme se√ß√£o

---

1Ô∏è‚É£1Ô∏è‚É£ LOGS E STATUS

- Status da nota:
   - Pendente
   - Autorizada
   - Rejeitada
- Motivo de rejei√ß√£o SEFAZ
- Log de impress√£o
- Log de comunica√ß√£o app local

---

1Ô∏è‚É£2Ô∏è‚É£ RESULTADO FINAL ESPERADO

- Impress√£o id√™ntica √† de mercado
- Sistema pronto para fiscaliza√ß√£o
- Zero retrabalho ao ativar produ√ß√£o
- Troca apenas do modo:
SIMULA√á√ÉO LEG√çTIMA ‚Üî INTEGRA√á√ÉO LEG√çTIMA

---

‚úÖ ESTE M√ìDULO √â OBRIGAT√ìRIO SER DESENVOLVIDO COMO PADR√ÉO PROFISSIONAL DE SISTEMAS COMERCIAIS BRASILEIROS